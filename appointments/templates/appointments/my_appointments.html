{% extends "base.html" %}
{% block content %}
<div class="container py-5">
  <h2 class="mb-4">My Appointments</h2>

  {% if appointments %}
    <div class="table-responsive shadow-sm rounded">
      <table class="table table-hover table-bordered align-middle">
        <thead class="table-primary">
          <tr>
            <th>Doctor</th>
            <th>Location</th>
            <th>Date</th>
            <th>Time</th>
            <th>Status</th>
            <th>Meeting Link</th>
          </tr>
        </thead>
        <tbody>
          {% for appt in appointments %}
          <tr>
            <td>{{ appt.doctor.username }}</td>
            <td>{{ appt.location.name }}</td>
            <td>{{ appt.date|date:"M d, Y" }}</td>
            <td>{{ appt.start_time|time:"g:i A" }} - {{ appt.end_time|time:"g:i A" }}</td>
            <td>
              {% if appt.status == "pending" %}
                <span class="badge bg-warning text-dark">Pending</span>
              {% elif appt.status == "confirmed" %}
                <span class="badge bg-success">Confirmed</span>
              {% elif appt.status == "completed" %}
                <span class="badge bg-secondary">Completed</span>
              {% else %}
                <span class="badge bg-danger">Cancelled</span>
              {% endif %}
            </td>
            <td>
              {% if appt.meeting_link and appt.status == "confirmed" %}
                <a href="{{ appt.meeting_link }}" target="_blank" class="btn btn-sm btn-info fw-bold">Join</a>
              {% else %}
                <span class="text-muted">-</span>
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <div class="alert alert-info mt-3">
      You have no appointments yet.
    </div>
  {% endif %}
</div>
{% endblock %}
